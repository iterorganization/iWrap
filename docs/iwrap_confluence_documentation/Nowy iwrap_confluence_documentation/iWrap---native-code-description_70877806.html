<!DOCTYPE html>
<html>
    <head>
        <title>Scientific Worfklows : iWrap - native code description</title>
        <link rel="stylesheet" href="styles/site.css" type="text/css" />
        <META http-equiv="Content-Type" content="text/html; charset=UTF-8">
    </head>

    <body class="theme-default aui-theme-default">
        <div id="page">
            <div id="main" class="aui-page-panel">
                <div id="main-header">
                    <div id="breadcrumb-section">
                        <ol id="breadcrumbs">
                            <li class="first">
                                <span><a href="index.html">Scientific Worfklows</a></span>
                            </li>
                                                    <li>
                                <span><a href="Wrapping-user-codes-into-actors---iWrap_70877391.html">Wrapping user codes into actors - iWrap</a></span>
                            </li>
                                                </ol>
                    </div>
                    <h1 id="title-heading" class="pagetitle">
                                                <span id="title-text">
                            Scientific Worfklows : iWrap - native code description
                        </span>
                    </h1>
                </div>

                <div id="content" class="view">
                    <div class="page-metadata">
                        
        
    
        
    
        
        
            Created by <span class='author'> Bartosz Palak</span>, last modified by <span class='editor'> Natalia Kraszewska</span> on 08 Nov 2021
                        </div>
                    <div id="main-content" class="wiki-content group">
                    <h1 class="auto-cursor-target" id="iWrapnativecodedescription-Introduction"><span class="nh-number">1. </span>Introduction&#xa0;</h1><p>Description of the native code has to be provided as a YAML document. It consist of two parts. The first one contains generic information common for all languages, The latter one contains information specific for a given language of the native code (currently defined only for Fortran and CPP).&#xa0;</p><p><br></p><p>Please note - all YAML fields are MANDATORY, unless explicitly described as OPTIONAL</p><h1 class="auto-cursor-target" id="iWrapnativecodedescription-Commonpart"><span class="nh-number">2. </span>Common part</h1><ul><li><em>programming_language</em><ul><li>meaning:&#xa0; language of physics code</li><li>value: one of predefined values: 'Fortran', 'CPP'</li><li>example: 'Fortran'</li></ul></li><li><em>code_name</em><ul><li>meaning:<ul><li>name of user method / subroutine to be called,</li><li>must be<span>&#xa0;</span><strong>exactly the same</strong>&#xa0;as name of called method / subroutine</li><li>used also as an actor name</li></ul></li><li>value: string</li><li>example: 'my_subroutine'&#xa0;</li></ul></li><li><em>data_type</em><ul><li>meaning: data type handled by the physics code</li><li>value: one of predefined values: 'Legacy IDS' 'HDC IDS'</li><li>example:&#xa0;'Legacy IDS'</li></ul></li><li><em>arguments&#xa0;</em><em>-<span>&#xa0;</span></em>list of arguments<ul><li>argument definition:&#xa0;<ul><li><em>name</em>:<ul><li>meaning: user defined argument name</li><li>value: string</li><li>example: equilibrium00&#xa0;&#xa0;&#xa0;</li></ul></li><li><em>type</em>:<ul><li>meaning: a type of an IDS argument</li><li>value:&#xa0;<ul><li>for data type 'IDS': predefined name of one of the IDSes</li><li>for data type 'HDC' : TBD</li></ul></li><li>example: 'equilibrium'&#xa0;</li></ul></li><li>intent<ul><li>meaning: determines if given argument is input or output one</li><li>value: predefined - string "IN", "OUT"</li></ul></li></ul></li></ul></li><li><em>code_path:</em>&#xa0;<ul><li>meaning: path to system library (C, CPP) , script (Python), etc containing the physics code, including method/subroutine to be run</li><li>value: string, valid path to file</li><li>example: 'any text'&#xa0;&#xa0;</li></ul></li><li>code_parameters:<ul><li>parameters:<ul><li>meaning: path to XML file containing user defined parameters of the physics code</li><li>value: string, valid path to file</li><li>example: './code_parameters/parameters.xml'</li></ul></li><li>schema:<ul><li>meaning: path to XSD file contains schema of XML parameters, to be able to validate them</li><li>value: string, valid path to file</li><li>example: './code_parameters/parameters.xsd'</li></ul></li></ul></li></ul><ul><li><em>documentation:</em><ul><li>meaning: human readable description of native code</li><li>value: string</li><li>example: 'any text'</li></ul></li></ul><h1 id="iWrapnativecodedescription-Languagespecificpart"><span class="nh-number">3. </span>Language specific part</h1><h2 id="iWrapnativecodedescription-Fortran/CPP"><span class="nh-number">3.1. </span>Fortran/CPP</h2><ul><li><em>compiler</em>:<ul><li>meaning: the name/vendor of the compiler (and not compiler command!) used to compile native codes</li><li>value: string, one of vendors of compilers, currently: 'Intel' or 'GCC'</li><li>example: 'Intel'</li></ul></li><li><em>mpi_</em>flavour:<ul><li>meaning: MPI compiler flavour to be used<span>&#xa0;</span><a class="external-link" href="https://jira.iter.org/browse/IMAS-2056" rel="nofollow"><span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image icon confluence-external-resource" src="https://jira.iter.org/secure/viewavatar?size=xsmall&amp;avatarId=13310&amp;avatarType=issuetype" data-image-src="https://jira.iter.org/secure/viewavatar?size=xsmall&amp;avatarId=13310&amp;avatarType=issuetype"></span>IMAS-2056</a><span>&#xa0;</span>-<span>&#xa0;</span><span class="summary">Allow users to select MPI implementation as well as compiler / linker</span><span>&#xa0;</span><span class="aui-lozenge aui-lozenge-subtle aui-lozenge-default jira-macro-single-issue-export-pdf" style="text-decoration: none;">ON HOLD</span></li><li>values: string, one of:&#xa0;<span style="color: rgb(23,43,77);"><span>&#xa0;</span>MPICH, MPICH2, MVAPICH2, OpenMPI, etc.</span></li><li>example 'MPICH2'</li></ul></li><li><em>open_mp</em>:<ul><li>meaning: if user code should be compiled with OpenMP flag</li><li>values: boolean</li><li>example 'true'</li></ul></li><li><em>system_libraries:</em><ul><li>meaning: a list of&#xa0;system libraries, managed using&#xa0;<em>pkg-config</em><span>&#xa0;</span>mechanism,&#xa0; that has to be used while native code linking</li><li>value:&#xa0;a list of&#xa0;system libraries names, as they are published by&#xa0;<em>pkg-config</em>&#xa0;<img class="emoticon emoticon-warning" src="images/icons/emoticons/warning.svg" data-emoticon-name="warning" alt="(warning)"></li><li><p class="auto-cursor-target">example:&#xa0;</p><div class="table-wrap"><table class="wrapped confluenceTable" style="text-align: left;"><tbody style="text-align: left;"><tr style="text-align: left;"><td style="text-align: left;" class="confluenceTd"><p style="text-align: left;"><code class="sql plain" style="text-align: left;">- fftw3f</code><br><code class="sql plain" style="text-align: left;">- glib</code><br><code class="sql plain" style="text-align: left;">- mkl</code></p></td></tr></tbody></table></div></li></ul></li></ul><ul><li><em>custom_libraries</em>:<ul><li>meaning: additional libraries, not managed by&#xa0;<em>pkg-config</em><span>&#xa0;</span>mechanism, necessary to link of the physics code<em>&#xa0;</em>:</li><li>value:&#xa0;&#xa0;a list of paths to libraries&#xa0;</li><li><p class="auto-cursor-target">example:&#xa0;</p><div class="table-wrap"><table class="wrapped confluenceTable" style="text-align: left;"><tbody style="text-align: left;"><tr style="text-align: left;"><td style="text-align: left;" class="confluenceTd"><p style="text-align: left;"><code class="sql plain" style="text-align: left;">- ./lib/custom/libcustom1.a</code><br><code class="sql plain" style="text-align: left;">- ./lib/custom/libcustom2.a</code></p></td></tr></tbody></table></div></li></ul></li></ul><h1 class="auto-cursor-target" id="iWrapnativecodedescription-Examples"><span class="nh-number">4. </span>Examples</h1><h2 id="iWrapnativecodedescription-Fortrancodedescription"><span class="nh-number">4.1. </span>Fortran code description</h2><div class="table-wrap"><table class="wrapped confluenceTable" style="text-align: left;"><colgroup><col></colgroup><tbody style="text-align: left;"><tr style="text-align: left;"><td style="text-align: left;" class="confluenceTd"><p style="text-align: left;"><code class="yml string bold" style="text-align: left;">---</code><br><code class="yml variable" style="text-align: left;">programming_language:</code><span>&#xa0;</span><code class="yml plain" style="text-align: left;">Fortran</code><br><code class="yml variable" style="text-align: left;">code_name:</code><span>&#xa0;</span><code class="yml plain" style="text-align: left;">demo_code</code><br><code class="yml variable" style="text-align: left;">data_type:</code><span>&#xa0;</span><code class="yml plain" style="text-align: left;">LEGACY_IDS</code><br><code class="yml variable" style="text-align: left;">arguments:</code><br><code class="yml plain" style="text-align: left;">-&#xa0;&#xa0; name</code><code class="yml constants" style="text-align: left;">:</code><span>&#xa0;</span><code class="yml plain" style="text-align: left;">equilibrium00</code><br><code class="yml spaces" style="text-align: left;">&#xa0;&#xa0;&#xa0;&#xa0;</code><code class="yml variable" style="text-align: left;">type:</code><span>&#xa0;</span><code class="yml plain" style="text-align: left;">equilibrium</code><br><code class="yml spaces" style="text-align: left;">&#xa0;&#xa0;&#xa0;&#xa0;</code><code class="yml variable" style="text-align: left;">intent:</code><span>&#xa0;</span><code class="yml plain" style="text-align: left;">IN</code><br><code class="yml plain" style="text-align: left;">-&#xa0;&#xa0; name</code><code class="yml constants" style="text-align: left;">:</code><span>&#xa0;</span><code class="yml plain" style="text-align: left;">equilibrium01</code><br><code class="yml spaces" style="text-align: left;">&#xa0;&#xa0;&#xa0;&#xa0;</code><code class="yml variable" style="text-align: left;">type:</code><span>&#xa0;</span><code class="yml plain" style="text-align: left;">equilibrium</code><br><code class="yml spaces" style="text-align: left;">&#xa0;&#xa0;&#xa0;&#xa0;</code><code class="yml variable" style="text-align: left;">intent:</code><span>&#xa0;</span><code class="yml plain" style="text-align: left;">IN</code><br><code class="yml plain" style="text-align: left;">-&#xa0;&#xa0; name</code><code class="yml constants" style="text-align: left;">:</code><span>&#xa0;</span><code class="yml plain" style="text-align: left;">equilibrium10</code><br><code class="yml spaces" style="text-align: left;">&#xa0;&#xa0;&#xa0;&#xa0;</code><code class="yml variable" style="text-align: left;">type:</code><span>&#xa0;</span><code class="yml plain" style="text-align: left;">equilibrium</code><br><code class="yml spaces" style="text-align: left;">&#xa0;&#xa0;&#xa0;&#xa0;</code><code class="yml variable" style="text-align: left;">intent:</code><span>&#xa0;</span><code class="yml plain" style="text-align: left;">OUT</code><br><code class="yml plain" style="text-align: left;">-&#xa0;&#xa0; name</code><code class="yml constants" style="text-align: left;">:</code><span>&#xa0;</span><code class="yml plain" style="text-align: left;">equilibrium11</code><br><code class="yml spaces" style="text-align: left;">&#xa0;&#xa0;&#xa0;&#xa0;</code><code class="yml variable" style="text-align: left;">type:</code><span>&#xa0;</span><code class="yml plain" style="text-align: left;">equilibrium</code><br><code class="yml spaces" style="text-align: left;">&#xa0;&#xa0;&#xa0;&#xa0;</code><code class="yml variable" style="text-align: left;">intent:</code><span>&#xa0;</span><code class="yml plain" style="text-align: left;">OUT</code><br><code class="yml variable" style="text-align: left;">code_path:</code><span>&#xa0;</span><code class="yml plain" style="text-align: left;">./lib/libmy_lib.a</code><br><code class="yml variable" style="text-align: left;">code_parameters:</code><br><code class="yml spaces" style="text-align: left;">&#xa0;&#xa0;&#xa0;&#xa0;</code><code class="yml variable" style="text-align: left;">parameters:</code><span>&#xa0;</span><code class="yml plain" style="text-align: left;">./code_paramneters/parameters.xml</code><br><code class="yml spaces" style="text-align: left;">&#xa0;&#xa0;&#xa0;&#xa0;</code><code class="yml variable" style="text-align: left;">schema:</code><span>&#xa0;</span><code class="yml plain" style="text-align: left;">./code_paramneters/parameters.xsd</code><br><code class="yml variable" style="text-align: left;">documentation:</code><span> "</span><code class="yml plain" style="text-align: left;">Lorem ipsum dolor sit amet</code><code class="yml plain" style="text-align: left;">"</code><br><code class="yml variable" style="text-align: left;">language_specific:</code><br><code class="yml spaces" style="text-align: left;">&#xa0;&#xa0;&#xa0;&#xa0;</code><code class="yml variable" style="text-align: left;">compiler:</code><span>&#xa0;</span><code class="yml plain" style="text-align: left;">Intel</code><br><code class="yml spaces" style="text-align: left;">&#xa0;&#xa0;&#xa0;&#xa0;</code><code class="yml variable" style="text-align: left;">mpi_flavour:</code><span>&#xa0;</span><code class="yml plain" style="text-align: left;">MPICH2</code><br><code class="yml spaces" style="text-align: left;">&#xa0;&#xa0;&#xa0;&#xa0;</code><code class="yml variable" style="text-align: left;">open_mp:</code><span>&#xa0;</span><code class="yml constants" style="text-align: left;">false</code><br><code class="yml spaces" style="text-align: left;">&#xa0;&#xa0;&#xa0;&#xa0;</code><code class="yml variable" style="text-align: left;">system_libraries:</code><br><code class="yml spaces" style="text-align: left;">&#xa0;&#xa0;&#xa0;&#xa0;</code><code class="yml string bold" style="text-align: left;">-</code><span>&#xa0;</span><code class="yml plain" style="text-align: left;">fftw3f</code><br><code class="yml spaces" style="text-align: left;">&#xa0;&#xa0;&#xa0;&#xa0;</code><code class="yml string bold" style="text-align: left;">-</code><span>&#xa0;</span><code class="yml plain" style="text-align: left;">glib</code><br><code class="yml spaces" style="text-align: left;">&#xa0;&#xa0;&#xa0;&#xa0;</code><code class="yml string bold" style="text-align: left;">-</code><span>&#xa0;</span><code class="yml plain" style="text-align: left;">mkl</code><br><code class="yml spaces" style="text-align: left;">&#xa0;&#xa0;&#xa0;&#xa0;</code><code class="yml variable" style="text-align: left;">custom_libraries:</code><br><code class="yml spaces" style="text-align: left;">&#xa0;&#xa0;&#xa0;&#xa0;</code><code class="yml string bold" style="text-align: left;">-</code><span>&#xa0;</span><code class="yml plain" style="text-align: left;">./lib/custom/libcustom1.a</code><br><code class="yml spaces" style="text-align: left;">&#xa0;&#xa0;&#xa0;&#xa0;</code><code class="yml string bold" style="text-align: left;">-</code><span>&#xa0;</span><code class="yml plain" style="text-align: left;">./lib/custom/libcustom2.a</code></p></td></tr></tbody></table></div><h2 class="auto-cursor-target" id="iWrapnativecodedescription-Pythoncodedescription"><span class="nh-number">4.2. </span>Python code description</h2><p><br></p><div class="table-wrap"><table class="wrapped confluenceTable" style="text-align: left;"><colgroup><col style="width: 528.0px;"></colgroup><tbody style="text-align: left;"><tr style="text-align: left;"><td style="text-align: left;" class="confluenceTd"><p style="text-align: left;"><code class="yml string bold" style="text-align: left;">---</code><br><code class="yml variable" style="text-align: left;">programming_language:</code><span>&#xa0;</span><code class="yml plain" style="text-align: left;">Python</code><br><code class="yml variable" style="text-align: left;">code_name:</code><span>&#xa0;</span><code class="yml plain" style="text-align: left;">demo_code</code><br><code class="yml variable" style="text-align: left;">data_type:</code><span>&#xa0;</span><code class="yml plain" style="text-align: left;">LEGACY_IDS</code><br><code class="yml variable" style="text-align: left;">arguments:</code><br><code class="yml plain" style="text-align: left;">-&#xa0;&#xa0; name</code><code class="yml constants" style="text-align: left;">:</code><span>&#xa0;</span><code class="yml plain" style="text-align: left;">equilibrium00</code><br><code class="yml spaces" style="text-align: left;">&#xa0;&#xa0;&#xa0;&#xa0;</code><code class="yml variable" style="text-align: left;">type:</code><span>&#xa0;</span><code class="yml plain" style="text-align: left;">equilibrium</code><br><code class="yml spaces" style="text-align: left;">&#xa0;&#xa0;&#xa0;&#xa0;</code><code class="yml variable" style="text-align: left;">intent:</code><span>&#xa0;</span><code class="yml plain" style="text-align: left;">IN</code><br><code class="yml plain" style="text-align: left;">-&#xa0;&#xa0; name</code><code class="yml constants" style="text-align: left;">:</code><span>&#xa0;</span><code class="yml plain" style="text-align: left;">equilibrium01</code><br><code class="yml spaces" style="text-align: left;">&#xa0;&#xa0;&#xa0;&#xa0;</code><code class="yml variable" style="text-align: left;">type:</code><span>&#xa0;</span><code class="yml plain" style="text-align: left;">equilibrium</code><br><code class="yml spaces" style="text-align: left;">&#xa0;&#xa0;&#xa0;&#xa0;</code><code class="yml variable" style="text-align: left;">intent:</code><span>&#xa0;</span><code class="yml plain" style="text-align: left;">IN</code><br><code class="yml plain" style="text-align: left;">-&#xa0;&#xa0; name</code><code class="yml constants" style="text-align: left;">:</code><span>&#xa0;</span><code class="yml plain" style="text-align: left;">equilibrium10</code><br><code class="yml spaces" style="text-align: left;">&#xa0;&#xa0;&#xa0;&#xa0;</code><code class="yml variable" style="text-align: left;">type:</code><span>&#xa0;</span><code class="yml plain" style="text-align: left;">equilibrium</code><br><code class="yml spaces" style="text-align: left;">&#xa0;&#xa0;&#xa0;&#xa0;</code><code class="yml variable" style="text-align: left;">intent:</code><span>&#xa0;</span><code class="yml plain" style="text-align: left;">OUT</code><br><code class="yml plain" style="text-align: left;">-&#xa0;&#xa0; name</code><code class="yml constants" style="text-align: left;">:</code><span>&#xa0;</span><code class="yml plain" style="text-align: left;">equilibrium11</code><br><code class="yml spaces" style="text-align: left;">&#xa0;&#xa0;&#xa0;&#xa0;</code><code class="yml variable" style="text-align: left;">type:</code><span>&#xa0;</span><code class="yml plain" style="text-align: left;">equilibrium</code><br><code class="yml spaces" style="text-align: left;">&#xa0;&#xa0;&#xa0;&#xa0;</code><code class="yml variable" style="text-align: left;">intent:</code><span>&#xa0;</span><code class="yml plain" style="text-align: left;">OUT</code><br><code class="yml variable" style="text-align: left;">code_path:</code><span>&#xa0;</span><code class="yml plain" style="text-align: left;">./demo_script.py</code><br><code class="yml variable" style="text-align: left;">code_parameters:</code><br><code class="yml spaces" style="text-align: left;">&#xa0;&#xa0;&#xa0;&#xa0;</code><code class="yml variable" style="text-align: left;">parameters:</code><span>&#xa0;</span><code class="yml plain" style="text-align: left;">./code_parameters/parameters.xml</code><br><code class="yml spaces" style="text-align: left;">&#xa0;&#xa0;&#xa0;&#xa0;</code><code class="yml variable" style="text-align: left;">schema:</code><span>&#xa0;</span><code class="yml plain" style="text-align: left;">./code_parameters/parameters.xsd</code><br><code class="yml variable" style="text-align: left;">documentation:</code><span> "</span><code class="yml string" style="text-align: left;">Lorem ipsum dolor sit amet, "</code><br><code class="yml variable" style="text-align: left;">specific_settings:</code><br><code class="yml spaces" style="text-align: left;">&#xa0;&#xa0;&#xa0;&#xa0;</code><code class="yml variable" style="text-align: left;">language_required_version:</code>&#xa0;<span>&#xa0;</span><code class="yml plain" style="text-align: left;">4.x</code><br><code class="yml spaces" style="text-align: left;">&#xa0;&#xa0;&#xa0;&#xa0;</code><code class="yml variable" style="text-align: left;">not_sure_about_other_settings:</code><span>&#xa0;</span><code class="yml constants" style="text-align: left;">true</code></p></td></tr></tbody></table></div><p><br></p><p><br></p>
                    </div>

                                        
                                                      
                </div>             </div> 
            <div id="footer" role="contentinfo">
                <section class="footer-body">
                    <p>Document generated by Confluence on 23 Nov 2021 10:36</p>
                    <div id="footer-logo"><a href="http://www.atlassian.com/">Atlassian</a></div>
                </section>
            </div>
        </div>     </body>
</html>
