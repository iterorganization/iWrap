import os

from .common.base_classes.base_actor import ActorBaseClass
from .common.definitions import Argument
from .common.code_parameters import CodeParameters

# {{ " PROVENANCE INFO ".center(80, '=') }}
ACTOR_DESCRIPTION = {{actor_settings | pprint | wordwrap(width=80, wrapstring='\n\t\t')}}

CODE_DESCRIPTION = {{code_description | pprint | indent(width=8)}}
# {{ "".center(80, '=') }}


class {{actor_settings.actor_name}}(ActorBaseClass):
    """{{code_description.documentation | wordwrap(width=80, wrapstring='\n\t\t') }}
    """

    NATIVE_LANGUAGE = '{{code_description.programming_language | lower}}'
    CODE_NAME = '{{code_description.code_name}}'
    IS_MPI = {% if not code_description.language_specific.mpi or code_description.language_specific.mpi == 'None' %} False {% else %} True {% endif %}
    #  {{code_description.language_specific.mpi}}

    # Provenance info
    actor_description = ACTOR_DESCRIPTION
    code_description = CODE_DESCRIPTION
    # {{ "".center(80, '=') }}

    def __init__(self):
        actor_dir = os.path.dirname( os.path.realpath( __file__ ) )
        super().__init__(actor_dir, self.NATIVE_LANGUAGE, self.CODE_NAME, self.IS_MPI)

        # Auto-generated list of arguments meta-data
    {% for argument in code_description.arguments %}
        argument = Argument(name='{{ argument.name }}', type='{{argument.type}}', intent='{{argument.intent}}')
        self.arguments.append(argument)
    {% endfor %}

    {% if code_description.code_parameters.parameters and code_description.code_parameters.schema %}
        # Static code parameters
        self.code_parameters.parameters_file = '{{code_description.code_parameters.parameters.split('/')[-1]}}'
        self.code_parameters.schema_file = '{{code_description.code_parameters.schema.split('/')[-1]}}'
    {% endif %}







